!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.Impetus=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return o=function(){return e},e}var i=.04,u=.11;window.addEventListener("touchmove",function(){},!!o()&&{passive:!1});var r=function e(t){function r(){document.removeEventListener("touchmove",v,!!o()&&{passive:!1}),document.removeEventListener("touchend",m),document.removeEventListener("touchcancel",l),document.removeEventListener("mousemove",v,!!o()&&{passive:!1}),document.removeEventListener("mouseup",m)}function c(){r(),document.addEventListener("touchmove",v,!!o()&&{passive:!1}),document.addEventListener("touchend",m),document.addEventListener("touchcancel",l),document.addEventListener("mousemove",v,!!o()&&{passive:!1}),document.addEventListener("mouseup",m)}function d(){g.call(B,$,_)}function a(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var t=e.changedTouches[0];return{x:t.clientX,y:t.clientY,id:t.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function f(e){if(V||re){if(e.handledByImpetus)return;e.handledByImpetus=!0}se=b(e),ce={x:0,y:0};var t=a(e);ne||oe||(ne=!0,ie=!1,Q=t.id,H=K=t.x,J=N=t.y,ue=[],h(H,J),c(),D&&D())}function v(e){e.preventDefault();var t=a(e);if(V||re){if(e.handledByImpetus)return;e.handledByImpetus=!0}var n=b(e);ce.x+=Math.abs(n.x-se.x),ce.y+=Math.abs(n.y-se.y);var o=ce.x>k.x&&ce.y>k.y;se=n,ne&&t.id===Q&&o&&(K=t.x,N=t.y,h(H,J),x())}function m(e){var t=a(e);ne&&t.id===Q&&(re=!1,l(),R&&R())}function l(){ne=!1,h(H,J),E(),r()}function h(e,t){for(var n=Date.now();ue.length>0&&!(n-ue[0].time<=100);)ue.shift();ue.push({x:e,y:t,time:n})}function p(){var e=K-H,t=N-J;if($+=e*T,_+=t*T,F){var n=w();0!==n.x&&($-=e*y(n.x)*T),0!==n.y&&(_-=t*y(n.y)*T)}else w(!0);d(),H=K,J=N,te=!1}function y(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function x(){te||s(p),te=!0}function w(e){var t=0,n=0;return void 0!==z&&$<z?t=z-$:void 0!==C&&$>C&&(t=C-$),void 0!==O&&_<O?n=O-_:void 0!==G&&_>G&&(n=G-_),e&&(0!==t&&($=t>0?z:C),0!==n&&(_=n>0?O:G)),{x:t,y:n,inBounds:0===t&&0===n}}function E(){var e=ue[0],t=ue[ue.length-1],n=t.x-e.x,o=t.y-e.y,i=t.time-e.time,u=i/15/T;W=n/u||0,Z=o/u||0;var r=w();(Math.abs(W)>1||Math.abs(Z)>1||!r.inBounds)&&(ie=!0,s(L))}function L(){if(ie){W*=Y,Z*=Y,$+=W,_+=Z;var e=w();if(Math.abs(W)>ee||Math.abs(Z)>ee||!e.inBounds){if(F){if(0!==e.x)if(e.x*W<=0)W+=e.x*i;else{var t=e.x>0?2.5:-2.5;W=(e.x+t)*u}if(0!==e.y)if(e.y*Z<=0)Z+=e.y*i;else{var t=e.y>0?2.5:-2.5;Z=(e.y+t)*u}}else 0!==e.x&&($=e.x>0?z:C,W=0),0!==e.y&&(_=e.y>0?O:G,Z=0);d(),s(L)}else ie=!1}}function b(e){return{x:e.touches?e.touches[0].clientX:e.clientX,y:e.touches?e.touches[0].clientY:e.clientY}}var M=t.source,B=void 0===M?document:M,g=t.update,I=t.multiplier,T=void 0===I?1:I,X=t.friction,Y=void 0===X?.92:X,P=t.initialValues,q=t.boundX,S=t.boundY,A=t.bounce,F=void 0===A||A,D=t.down,R=t.up,U=t.disablePropagation,V=void 0!==U&&U,j=t.startThreshold,k=void 0===j?{x:0,y:0}:j;n(this,e);var z,C,O,G,H,J,K,N,Q,W,Z,$=0,_=0,ee=.3*T,te=!1,ne=!1,oe=!1,ie=!1,ue=[],re=!1,se=null,ce=null;!function(){if(!(B="string"==typeof B?document.querySelector(B):B))throw new Error("IMPETUS: source not found.");if(!g)throw new Error("IMPETUS: update function not defined.");P&&(P[0]&&($=P[0]),P[1]&&(_=P[1]),d()),q&&(z=q[0],C=q[1]),S&&(O=S[0],G=S[1]),B.addEventListener("touchstart",f,!!o()&&{passive:!0}),B.addEventListener("mousedown",f,!!o()&&{passive:!0})}(),this.forceStopPropagation=function(){re=!0},this.destroy=function(){return B.removeEventListener("touchstart",f),B.removeEventListener("mousedown",f),r(),null},this.pause=function(){r(),ne=!1,oe=!0},this.resume=function(){oe=!1},this.setValues=function(e,t){"number"==typeof e&&($=e),"number"==typeof t&&(_=t)},this.setMultiplier=function(e){T=e,ee=.3*T},this.setBoundX=function(e){z=e[0],C=e[1]},this.setBoundY=function(e){O=e[0],G=e[1]}};t.exports=r;var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()});